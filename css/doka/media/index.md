---
title: "@media"
tags:
  - doka
authors:
  - lenaryan
summary:
  - ＠-правило
  - media
  - media-query
  - медиавыражение
  - адаптивность
---

## Кратко

Директива, которая помогает применять разные стили для разных параметров экрана — ширины, высоты, ориентации и даже типа устройства.

## Пример

Сделаем элемент с классом `block` флекс-контейнером на экранах, чья ширина равна или больше 900 пикселей:

```css
@media screen and (min-width: 900px) {
  .block {
    display: flex;
  }
}
```

## Как это понять

При вёрстке адаптивных сайтов часто нужно чтобы какой-то набор стилей применился только при соблюдении определённых параметров. Например, текст должен стать зелёным только при горизонтальной ориентации смартфона. Или блок занял всю ширину родителя, если ширина экрана больше или равна 1500 пикселям. Для подобных действий и существуют медиавыражения. Они помогают адаптировать вёрстку под разные экраны и устройства и при этом не писать лишний код.

## Как пишется

В общем виде синтаксис выглядит так:

```css
@media [тип устройства] [параметры запроса] {
  [css-правила]
}
```

В примере:

```css
@media screen and (min-width: 900px) {
  .block {
    display: flex;
  }
}
```

тип устройства — `screen`, а параметр запроса — `min-width: 900px`.

Есть четыре типа устройств, которые мы можем указать:

- `all` — медиавыражение применится ко всем устройствам. Если не прописать никакой тип, то по умолчанию применится этот;
- `print` — стили внутри такого медиавыражения применятся при печати на принтерах, в том числе в режиме предпросмотра документа перед печатью;
- `screen` — для устройств с экранами;
- `speech` — для скринридеров.

Возможные параметры запроса можно разделить на несколько категорий:

<details>
  <summary>Характеристики страницы и окна браузера</summary>

- `aspect-ratio` — соотношение между шириной и высотой окна;
- `height` — высота окна браузера;
- `max-aspect-ratio` — максимальное соотношение между шириной и высотой окна;
- `max-width` — максимальная ширина окна браузера;
- `min-aspect-ratio` — минимальное соотношение между шириной и высотой окна;
- `min-height` — минимальная высота окна браузера;
- `min-width` — минимальная ширина окна браузера;
- `orientation` — ориентация устройства (альбомная или портретная);
- `overflow-block` — проверка, как устройство вывода обрабатывает содержимое, которое выходит за пределы области просмотра по оси блока;
- `overflow-inline` — проверка, можно ли прокручивать содержимое, выходящее за пределы области просмотра по встроенной оси;
- `width` — ширина окна браузера.

</details>

<details>
  <summary>Качество отображения</summary>

- `environment-blending` — метод для определения внешнего окружения устройства, такого как тусклое или слишком яркое освещение;
- `display-mode` — проверка режима отображения; включает в себя полноэкранный режим (не браузерный), автономность (автономное приложение), минимальный пользовательский интерфейс (автономное приложение с какой-либо навигацией) и браузер (более традиционное окно браузера);
- `grid` — проверка, является ли устройство сеткой или растровым изображением;
- `max-resolution` — максимальное разрешение устройства в dpi или dpcm;
- `min-resolution` — минимальное разрешение устройства в dpi или dpcm;
- `resolution` — разрешение устройства в dpi или dpcm;
- `scan` — процесс сканирования устройства вывода;
- `update` — проверка, как быстро устройство вывода может изменить внешний вид контента.

</details>

<details>
  <summary>Цвет</summary>

- `color` — количество бит на цвет на устройстве вывода;
- `color-gamut` — примерный диапазон цветов, поддерживаемый браузером и устройством вывода;
- `color-index` — количество цветов, которое может отображаться устройством;
- `dynamic-range` — комбинация уровня яркости, глубины цвета и контрастного соотношения для видео в браузере или устройстве вывода;
- `inverted-colors` — проверка, инвертируются ли цвета браузером или ОС;
- `max-color` — максимальное количество бит на цвет на устройстве вывода;
- `max-color-index` — максимальное количество цветов, которое может отображаться устройством;
- `max-monochrome` — максимальное количество бит на цвет на монохромном устройстве вывода;
- `min-color` — минимальное количество бит на цвет на устройстве вывода;
- `min-color-index` — минимальное количество цветов, которое может отображаться устройством;
- `min-monochrome` — минимальное количество бит на цвет на монохромном устройстве вывода;
- `monochrome` — количество бит на цвет на монохромном устройстве вывода.

</details>

<details>
  <summary>Взаимодействие</summary>

- `any-hover` — проверка, позволяет ли любое из устройств ввода наводить указатель на элементы;
- `any-pointer` — проверка, является ли любое из устройств ввода указателем, и насколько оно точное;
- `hover` — проверка, позволяет ли основное устройство наводить указатель на элементы;
- `pointer` — проверка, является ли основное устройство ввода указателем, и насколько оно точное.

</details>

<details>
  <summary>Параметры с префиксом `video-`</summary>

- `video-color-gamut` — примерный диапазон цветов, поддерживаемый для видео в браузере и устройстве вывода;
- `video-dynamic-range` — комбинация уровня яркости, глубины цвета и контрастного соотношения для видео в браузере или устройстве вывода;
- `video-height` — высота видео на выбранном дисплее (ведётся обсуждение);
- `video-resolution` — разрешение видео на выбранном дисплее (ведётся обсуждение);
- `video-width` — ширина видео на выбранном дисплее (ведётся обсуждение).

</details>

<details>
  <summary>Скрипты</summary>

- `scripting` — проверка, включены ли скрипты;

</details>

<details>
  <summary>Пользовательские настройки</summary>

- `forced-colors` — проверка, запрещает ли браузер цвета, доступные для использования;
- `prefers-color-scheme` — определяет, какую тему предпочитает пользователь — светлую или тёмную;
- `prefers-contrast` — определяет, установлены ли настройки для увеличения или уменьшения контраста между цветами;
- `prefers-reduced-data` — определяет, предпочитает ли пользователь загружать меньше данных на странице;
- `prefers-reduced-motion` — определяет, отключены ли анимации в системных настройках пользователя;
- `prefers-reduced-transparency` — определяет, отключена ли прозрачность в системных настройках пользователя.

</details>

<details>
  <summary>Устаревшие</summary>

- `device-aspect-ratio` — соотношение между шириной и высотой устройства вывода;
- `device-height` — высота дисплея устройства;
- `device-width` — ширина дисплея устройства.

</details>

В медиавыражении может быть перечислено несколько условий через запятую. В таком случае стили применятся для любого из указанных условий. Если указано:

```css
@media (orientation: landscape), (max-width: 960px) {
  .text {
    color: tomato;
  }
}
```

то запрос сработает на всех устройствах с альбомной ориентацией экрана или на всех устройствах с шириной экрана менее 960 пикселей.

Часто в медиавыражениях может использоваться ключевое слово `and`, реже встречаются ключевые слова `not` и `only`.

Если мы пишем и тип устройства, и указываем параметры, то после типа обязательно пишется `and`.

```css
@media print and (min-width: 320px) {
  .link {
    text-decoration: underline;
  }
}
```

Также `and` пишется между параметрами.

```css
@media (min-width: 320px) and (max-width: 640px) {
  .link {
    text-decoration: underline;
  }
}
```

Ключевое слово `not` используется для отрицания выражения. Оно имеет низкий приоритет и применяется в последнюю очередь. Например, в медиавыражении:

```css
@media not screen and (min-width: 380px) {
  .block {
    display: flex;
  }
}
```

сначала вычислится выражение "для всех экранов с минимальной шириной 380 пикселей", а потом оно инвертируется — "для всех устройств, кроме устройств с экранами с минимальной шириной 380 пикселей". То есть будет читаться браузером как:

```css
@media not (screen and (min-width: 380px)) {
  .block {
    display: flex;
  }
}
```

При использовании `not` в медиавыражениях с запятой инвертируется только та часть выражения, где указан `not`. Например, порядок действий в выражении:

```css
@media not screen and (height: 500px), print and (height: 700px) {
  .text {
    color: tomato;
  }
}
```

будет выглядеть так:

```css
@media (not (screen and (height: 500px))), print and (height: 700px) {
  .text {
    color: tomato;
  }
}
```

Поскольку запятая в медиавыражении означает лишь перечисление, то `not` в первой части выражения не будет распространяться на вторую, и инвертируется только часть "для всех экранов с высотой окна браузера 500 пикселей".

Ключевое слово `only` иногда встречается перед указанием типа устройства — оно используется для того, чтобы старые браузеры, которые не поддерживают медиавыражения, не применяли указанные стили. Современные браузеры никак не реагируют на `only`.

```css
@media only screen and (max-width: 600px) {
  body {
    background-color: cornflowerblue;
  }
}
```

## Подсказки

💡 Для вёрстки от мобильных (mobile first) лучше использовать медиавыражения с `min-width` и располагать их в порядке увеличения ширины экрана; для вёрстки от десктопа (desktop first) — `max-width`, и располагать выражения в обратном порядке.
