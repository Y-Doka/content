---
title: Что такое файл
name: file
authors:
  - igsekor
contributors:
  - furtivite
summary:
  - файл
  - Unix
---

## Кратко

Файл — это набор сгруппированных данных, записанных на физическом носителе информации и имеющих имя для быстрого доступа в операционной системе. Файлы имеют атрибуты, которые определяют поведение операционной системы при обращении к ним. Файлы хранятся на носителе информации согласно абстрактным моделям, наибольшее распространение среди которых получили иерархические модели — деревья директорий (папок) и файлов.

## Как это понять

### Файлы

Файл — интуитивно понятная абстракция, которая пришла из физического мира. До появления компьютеров файлом называли коробку, папку, шнур, пружину и что-то подобное, с помощью которых можно было собрать, упорядочить и хранить несколько листов бумаги вместе.

Программа — это набор инструкций для обработки данных. Чтобы программа работала, в оперативную память необходимо поместить эти данные. В первых электронных компьютерах программы (набор инструкций) передавались с помощью коммутации блоков логических переключателей простыми проводами. Данные же приходилось вводить вручную через специальный пульт оператора. Очевидно, что такой подход не был достаточно эффективным. Появилась необходимость в новых типах носителей информации, которые во многом определяли модели хранения данных.

Изначально под файлом понимали последовательность байтов. Их можно было вводить вручную с помощью специального устройства — телетайпа. С появлением магнитных лент для хранения данных стали использовать другую модель — последовательность записей переменной длины (программисты должны были знать, с какого по какой бит записаны их программы и данные, использовался ли последовательный доступ к данным). Когда появились перфокарты, данные стали разделять на записи постоянной длины (на одной перфокарте умещалось 80 машинных слов). Чуть позже были разработаны модели иерархической организации данных в файлах с помощью дерева поиска. Эти модели применяются и сейчас, в специализированных системах хранения.

В современных компьютерах с приходом жёстких и гибких дисков, поддерживающих произвольный доступ к данным, разработчики операционных систем снова вернулись к самой первой абстракции — представлению файла в виде последовательности байтов. Однако отличие состояло в том, что у этой последовательности байтов наконец появилось имя.

Чтобы можно было отделить один файл от другого, в файл записываются атрибуты наряду с данными. Имя файла иногда выносится в отдельную сущность, но чаще записано в атрибутах. Список атрибутов зависит от конкретной операционной системы и файловой системы, которая используется в ней. Вот список наиболее распространённых атрибутов файла:

- имя;
- права доступа (определяются согласно правилам операционной системы);
- персонификация (создатель и владелец);
- тип файла;
- размер файла;
- время создания файла;
- время последней модификации;
- время последнего обращения;
- указатель чтения / записи (часто называют курсором или указателем);
- и др.

Практически в любой операционной системе работа с файлами осуществляется по похожему сценарию:

1. Открытие файла (начало сессии);
2. Работа с содержимым файла и его атрибутами;
3. Закрытие файла (окончание сессии).

Большинство операционных систем для экономии времени пользователя применяют кэширование и буферизацию. Например, при записи новых данных в файл или при изменении существующих, операционная система помещает данные в буфер. Если данных немного, то буфер остаётся практически пустым, поскольку изменения сразу попадают в файл. Если данных много, то они переносятся из буфера в файл постепенно во время работы с ним, а иногда и после закрытия файла. В этом случае в интерфейсе пользователя сохранение изменений в файле происходит очень быстро, а для операционной системы существует некоторая инерция. Об этом стоит помнить, особенно при работе с большими файлами.

Для работы с файлами в операционной системе предусмотрены специализированные программные интерфейсы. Именно с помощью них программы получают доступ к файлам. Среди интерфейсов можно выделить типовые:

- `open` — открытие сессии работы с файлом / создание нового файла;
- `close` — закрытие сессии работы с файлом;
- `read` / `write` — читать / писать в файл относительно положения указателя чтения / записи;
- `delete` — удалить файл;
- `seek` — позиционирование указателя чтения / записи;
- `rename` — переименование файла;
- `read_attributes` / `write_attributes` — чтение / модификация атрибутов файла.

Поскольку в Unix-подобных системах представление внешнего устройства сводится к абстракции файла, работа с устройством осуществляется через интерфейсы работы с файлами. Это очень удобно и позволяет унифицировать работу программ, облегчает многие задачи для пользователя по обслуживанию приложений и настройке операционной системы.

### Файловые системы

Файловая система — абстракция, которая обеспечивает работу с данными на разных типах внешних накопителей таким образом, чтобы для программ в операционной системе не видна была разница в аппаратной реализации. Файловая система позволяет на физическом устройстве выделять и освобождать постоянную память, заполнять её данными в асинхронном режиме, используя абстракцию файла. Кроме того, файловая система разрешает коллизии с именами файлов.

Коллизии можно разрешать очень простым методом — не позволять создавать файлы с одинаковыми именами. Исторически первой моделью организации файлов была одноуровневая файловая система. Но использовать такую файловую систему было крайне неудобно, если в операционной системе работало несколько пользователей и использовалось большое количество файлов. Однако одноуровневые файловые системы до сих пор применяются для определённых устройств, например, в стиральных машинах или в микроволновых печах. Историческим продолжением одноуровневых файловых систем являются системы с фиксированным количеством уровней. Часто такие файловые системы используются на маршрутизаторах или, например, телевизорах.

Самой успешной моделью файловой системы является иерархическая модель. В своё время она произвела настоящую революцию в хранении данных. Иерархическая система подразумевает существование дерева данных с узлами трёх типов:

- корневая директория (каталог, папка) — специальный узел дерева;
- обычная директория (каталог, папка) — обычные узлы дерева;
- файлы — листья дерева.

Такая структура позволяет хранить большое количество файлов в разных директориях, в том числе с одинаковым именем, избегая коллизий. Путь до файла в дереве директорий является неотъемлемой частью полного имени файла. Таким способом обеспечивается уникальность имени файла. Полное имя формируется от корневой директории. Как правило, поддерживаются и относительные имена файлов, из которых можно сформировать полное имя путём конкатенации (сложения строк) имени директории и относительного имени. Один уровень иерархии от другого отделяется особым символом (например, `/` для Unix-подобных систем и `\` для операционных систем на базе Windows).

В Unix-подобных системах поддерживаются специальные директории: домашняя директория пользователя и текущая директория. Часть операционных систем вслед за Unix использует эти абстракции. Модель файловой системы Unix считается одной из наиболее удачных и безопасных, поскольку:

- используется очень простая, но достаточно безопасная система прав доступа;
- поддерживаются символические ссылки;
- директории являются специальными файлами;
- внешние устройства являются специальными файлами;
- подключение внешних дисков или любых других внешних устройств обеспечивается подключением их к общей файловой системе.
