---
title: Что такое файл
name: file
authors:
  - igsekor
contributors:
  - furtivite
summary:
  - файл
  - Unix
---

## Кратко

Файл — это набор сгруппированных данных, записанных на физическом носителе информации и имеющих имя для быстрого доступа в операционной системе. Файлы имеют атрибуты, которые определяют поведение операционной системы при обращении к ним. Файлы хранятся на носителе информации согласно абстрактным моделям, наибольшее распространение среди которых получили иерархические модели — деревья директорий (папок) и файлов.

## Как это понять

### Файлы

Файл — интуитивно понятная абстракция, которая пришла из физического мира. Файлы можно представить как конверты в которые можно положить бумагу. В мире канцелярских принадлежностей давно уже используются одноименные пластиковые прозрачные конверты, которые могут быть легко помещены в папку. Когда были реализованы первые электронные вычислительные машины, возникла необходимость хранения данных и программ. Если настройки компьютеров и программы в те годы часто задавались физическими переключателями (коммутаторами) или настройками электронных схем, существующими в виде инструкций, то обрабатываемые данные нужно было вводить вручную. Программы как тогда, так и сейчас работали с данными, которые предварительно загружены в оперативную память.

Физические носители информации во многом определяли модели хранения данных. Например, изначально под файлом понимали последовательность байтов, которые записывались вручную на листке бумаге и вводились также вручную. С приходом магнитных лент для хранения данных стали использовать последовательность записей переменной длинны (программисты должны были знать с какого по какой бит записаны их программы и данные, использовался последовательный доступ к данным). Когда появились перфокарты данные стали разделять на записи постоянной длины (на одной перфокарте умещалось 80 машинных слов). Чуть позже даже были разработаны модели иерархической организации данных в файлах в виде структуры данных, которая называется бинарное дерево поиска. Они применяются в специализированных системах хранения и сейчас.  
  
В современных компьютерах с приходом жестких и гибких дисков, поддерживающих произвольный доступ к данным, разработчики операционных систем снова вернулись к самой первой абстракции — представлению файла в виде последовательности байтов. Однако отличие состояло в том, что у этой последовательности байтов наконец появилось имя.

Чтобы можно было отделить один файл от другого, в файл записываются атрибуты, на ряду с данными. Имя файла иногда выносится в отдельную сущность, но чаще также записано в атрибутах. Список атрибутов зависит от конкретной операционной системы и файловой системы, которая используется в ней. Вот список наиболее распространенных атрибутов файла:

- Имя;
- Права доступа (определяются согласно правилам операционной системы);
- Персонификация (создатель и владелец);
- Тип файла;
- Размер файла;
- Время создания файла;
- Время последней модификации;
- Время последнего обращения;
- Указатель чтения / записи (часто называют курсором или указателем);
- и др.

Практически в любой операционной системе работа с файлами осуществляется по похожему сценарию:

1. Открытие файла (начало сессии);
2. Работа с содержимым файла и его атрибутами;
3. Закрытие файла (окончание сессии).

Большинство операционных систем для экономии времени пользователя применяют кэширование и буферизацию. Например, при записи новых или изменении существующих данных в файле, операционная система помещает данные в буфер. После закрытия файла данные записываются в файл постепенно. Для пользователя происходит все очень быстро, для операционной системы есть некоторая инерция. Об этом стоит помнить, особенно при работе с большими файлами.

Для работы с файлами в операционной системе предусмотрены специализированные программные интерфейсы. Именно с помощью них программы получают доступ к файлам. Среди интерфейсов можно выделить типовые:

- open — открытие сессии работы с файлом / создание нового файла;
- close — закрытие сессии работы с файлом;
- red / write — читать / писать в файл относительно положения указателя чтения / записи;
- delete — удалить файл;
- seek — позиционирование указателя чтения / записи;
- rename — переименование файла;
- read / write_attributes — чтение, модификация атрибутов файла.

Поскольку в Unix-подобных системах даже представление внешних устройств в операционной системе сводится к абстракции файлами, работа с ними осуществляется через файловые интерфейсы. Это очень удобный механизм, который позволяет унифицировать работу пользователя, облегчает многие задачи настройки и обслуживания.

### Файловые системы

В операционных системах стали использовать новую абстракцию — файловую систему. Она обеспечивала работу с памятью на разных типах внешних накопителей таким образом, чтобы для программ в операционной системе не видна была разница в аппаратной реализации. Файловая система позволила на физическом устройстве выделять и освобождать постоянную память, заполнять ее данными в асинхронном режиме, используя абстракцию именованной последовательности байт — файл. Кроме того, файловая система разрешала коллизии с именами файлов. Ведь невозможно работать с файлами, имеющими одинаковое имя.

Коллизии можно было разрешать очень простым методом — не позволять создавать файлы с одинаковыми именами. Исторически первой моделью организации файлов была одноуровневая файловая система. Но использовать такую файловую систему было крайне не удобно, если в операционной системе работало несколько пользователей, и / или использовалось большое количество файлов. Однако одноуровневые файловые системы до сих пор применяются для определенных устройств, например, в стиральных машинах или в микроволновых печах. Историческим продолжением одноуровневых файловых систем являются системы с фиксированным количеством уровней. Часто такие файловые системы используются на маршрутизаторах или телевизорах.

Самой успешной моделью файловой системы является иерархическая модель файловой системы. В свое время она произвела настоящую революцию в хранении данных, а сейчас является довольно обыденным и интуитивно-понятной системой.

Иерархическая система подразумевает существование дерева данных с узлами трех типов:

 - корневая директория (каталог, папка) — специальный узел дерева;
- обычный каталог — обычные узлы дерева;
- файлы — листья дерева.

Такая структура позволяет хранить большое количество файлов в разных директориях, в том числе с одинаковым именем, избегая коллизий. Путь до файла в дереве директорий является неотъемлемой частью полного имени файла. Таким способом обеспечивается уникальность имени файлов. Полное имя формируется от корневой директории. Как правило, поддерживаются и относительные имена файлов, из которых можно сформировать полное имя путем конкатенации (сложения строк) имени директории и относительного имени. Один уровень иерархии от другого отделяется особым символом (например, `/` для Unix-подобных систем и `\` для операционных систем на базе Windows).

В Unix-подобных системах поддерживаются специальные директории: домашняя директория пользователя и текущая директория. Часть операционных систем вслед за Unix продолжает использовать эти абстракции. Модель файловой системы Unix считается одной из наиболее удачных и безопасных:

- используется очень простая но достаточно безопасная система прав доступа;
- поддерживаются символические ссылки;
- директории являются специальными файлами;
- внешние устройства являются специальными файлами;
- подключение внешних дисков или любых других внешних устройств обеспечивается подключением из к общей файловой системе.
