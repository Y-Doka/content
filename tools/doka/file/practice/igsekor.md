---
tags:
  - practice
permalink: false
---

## Имена файлов и пути

Путь является неотъемлемой частью имени файла. Абсолютный (полным) именем файла называется путь от корневой директории, относительным — путь от текущей (рабочей) директории. В одной директории не может быть файлов с одинаковым именем. В зависимости от операционной системы и файловой системы именование файла обладает рядом особенностей.

### Браузер и имена файлов в Интернете

Абсолютное имя может включать в себя ряд параметров:

- протокол или способ доступа (http, ftp, file и др.);
- имя или адрес компьютера, узла сети (wikipedia.org, 207.142.131.206, \\MYCOMPUTER, SYS: и др.);
- устройство хранения, диск (C:, /, SYSLIB и др.);
- путь к директории (/usr/bin, \TEMP, [USR.LIB.SRC] и др.);
- собственно имя файла, которое может содержать его расширение (.txt, .exe, .COM и т. п.).

В строке адреса мы всегда указываем путь к конкретному файлу, ничего более. В Интернете есть части абсолютного имени, которые подставляются по умолчанию. Если вы введёте в строку адреса браузера сайт `company.com`, браузер сначала автоматически подставит протокол по умолчанию `https`. Окончание абсолютного имени файла в адресной строке браузера зависит от технологии, которая используется для отображения контента страницы. Если страницу полностью формирует сервер (рендеринг на стороне сервера), то при запросе он может вернуть значение `index.html` для абсолютного пути. В браузере по умолчанию часто не показываются конечный файл, поэтому вы можете и не увидеть, что это `index.html`. Настройки отображения настраиваются отдельно. Если рендеринг происходит на стороне клиента (в браузере), то адрес может быть сформирован динамически и не всегда имеет конечный файл. Это происходит из-за специального [API](/js/articles/api) браузера, которое называется History API. В этом режиме адресная строка используется для отображения виртуального файла. Виртуальный файл существует только в контексте конкретного веб-приложения. По сути, запуская такое веб-приложение, вы как-будто загружаете файл в оперативную память.

### Операционная система Windows

Абсолютное имя файла включает в себя букву логического диска, после которого обязательно идет двоеточие и обратная наклонная черта (back slash) `:\`. Затем через символ `\` перечисляются все поддиректории. В конце указывается имя файла. В Windows есть ограничение на длину абсолютного имени файла, которая не может больше 260 символов. При этом первые три символа используются для буквы диска и служебного разделителя `:\`, а последний — невидимый специальный символ имеет значение `<NUL>`. Оставшиеся 256 символов используются непосредственно для имени. Начиная с Windows 10, ограничение [было снято](https://docs.microsoft.com/en-us/windows/win32/fileio/maximum-file-path-limitation?tabs=cmd#enable-long-paths-in-windows-10-version-1607-and-later), но всегда необходимо помнить о пользователях более ранних версий этой операционной системы.

### Unix-подобные операционные системы

Абсолютное имя файла в Unix-подобных операционных системах всегда начинается со специального символа корневой директории `/`, после которого перечисляются через этот же символ все поддиректории. Если путь начинается не с косой черты, то они называются относительными. Однако существуют специальные последовательности символов, которые позволяют использовать относительные пути эффективно. Например символ `.` используется для доступа к текущей директории, а `..` к директории, которая стоит на уровень выше. Чтобы перейти на два уровня вверх, можно использовать такую последовательность: `../../`. Символ `~` в начале относительного имени будет указывать на домашнюю директорию пользователя, которая обычно расположена в директории `/home/username`.

### Запрещённые символы

При проектировании работы веб-приложения необходимо учитывать переносимость — Ваше приложение в идеале должно заработать на большинстве операционных систем. Формировать имя файла нужно очень осторожно: в некоторых операционных системах используются файловые системы, в которых для имён файлов запрещены некоторые символы. Например, для Windows следующие символы запрещены:

- \ — разделитель подкаталогов;
- / — разделитель ключей командного интерпретатора;
- : — отделяет букву диска или имя альтернативного потока данных;
- * — заменяющий символ (маска «любое количество любых символов»);
- ? — заменяющий символ (маска «один любой символ»);
- " — используется для указания путей, содержащих пробелы;
- < — перенаправление ввода;
- > — перенаправление вывода;
- | — обозначает конвейер;
- + — (в различных версиях) конкатенация.

В именах файлов UNIX-подобных операционных систем запрещен символ `/` и символ конца строки `\0`.

### Расширение имени файла

Расширение имени файла часто используется для идентификации формата файла. Это нужно исключительно для интерфейса пользователя и простой фильтрации, сортировки или группировки имён файлов. В операционной системе всегда существует менеджер запуска приложений. Расширение файла помогает автоматически определить целевую программу, для которой предназначен тот или иной файл. Тип файла при этом задается в атрибутах файла, расширение имени файла — это лишь инструмент для быстрого (визуального) определения типа файла.

## Структура директорий в Linux

Во многих Linux-системах можно встретить каталоги `/etc`, `/home`, `/usr/bin` и прочие. В конце января 2004 года был принят [стандарт Filesystem Hierarchy Standard (FHS)][1], согласно которому в корневой директории Linux-системы должны находиться поддиректории со стандартными именами. Более того, тип данных (файлов), которые могут находится в той или иной директории однозначно регламентирован. Стандарт определяет следующие директории в корневой директории для следующих задач:

Директория      | Символ 
:---------------|:------------
`/bin`          |  Файлы основных команд (утилит)
`/boot`         |  Неизменяемые файлы, необходимые для загрузки системы
`/dev`          |  Файлы устройств
`/proc`         |  Системные файлы
`/sys`          |  Подсистема диагностики и управления операционной системы (аналог `/proc`)
`/etc`          |  Файлы конфигурации системы на данном компьютере
`/home`         |  Домашние директории пользователей
`/lib`          | Основные разделяемые библиотеки и модули ядра
`/lib<alt>`     | Основные разделяемые библиотеки для альтернативных форматов исполняемых файлов
`/mnt`          |  Точка монтирования для временно подключаемых файловых систем
`/root`         |  Домашний каталог суперпользователя root
`/opt`          |  Дополнительные пакеты программного обеспечения
`/sbin`         |  Основные системные исполняемые файлы
`/tmp`          |  Временные файлы
`/usr`          |  Иерархия второго уровня
`/var`          |  Переменные данные

Если в операционной системе файлы размещены по стандарту, это позволяет предсказать поведение операционной системы как человеку, так и программисту, который пишет программу. Плюсом является то, что при переходе от одной операционной системы на базе Linux к другой пользователю будет легче ориентироваться в подобной файловой структуре. Для программиста стандартное расположение файлов позволяет организовать автоматическое взаимодействие между разными компонентами системы.

Однако практически ни один из дистрибутивов Linux не следует стандарту полностью. И сам стандарт продолжает развиваться. Разработчики операционных системы из семейства Unix вообще игнорируют данный стандарт в пользу поддержки собственного.

[1]:	https://wiki.linuxfoundation.org/lsb/fhs