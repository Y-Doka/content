---
title: "<source>"
author: ezhkov_d
summary:
  - адаптивные изображения
  - picture
  - srcset
  - media
---

## Кратко

При помощи тега `<source>` можно указать несколько источников для видео ([`<video>`](/html/doka/video), аудио ([`<audio>`](/html/doka/audio)) или изображения ([`<picture>`](/html/doka/picture)). Очень пригождается, когда нужно подключить контент в нескольких форматах для лучшей поддержки в разных браузерах.

## Пример

Пример указания пути до видеофайла в форматах WebM и MP4 :

```html
<video controls width="250" height="200" muted>
  <source src="birthday.webm" type="video/webm">
  <source src="birthday.mp4" type="video/mp4">
</video>
```

Пример указания пути до аудиофайла в форматах MP3 и OGG:

```html
<audio controls>
  <source src="song.mp3" type="audio/mpeg">
  <source src="song.ogg" type="audio/ogg">
</audio>
```

Пример использования тега `<source>` для адаптивных изображений. При ширине экрана от 0 до 599 пикселей будет загружено изображение `small.jpg`, на ширине экрана от 600 до ∞ будет загружено изображение `big.jpg`:

```html
<picture>
  <source srcset="big.jpg" media="(min-width: 600px)">
  <img src="small.jpg" alt="Абстрактное изображение">
</picture>
```

## Как это понять

Когда мы хотим вставить на страницу аудио- или видеофайл, то используем теги [`<audio>`](/html/doka/audio/) и [`<video>`](/html/doka/video). Если у нас есть несколько одинаковых файлов разного формата (например, один и тот же видеоролик в форматах .mp4 и .webm), то можно использовать тег `<source>`. Он поможет определить, какие форматы поддерживает браузер и загрузить медиафайл в нужном формате.

С адаптивными изображениями чуть сложнее. Тег `<source>` используется совместно с тегами [`<picture>`](/html/doka/picture) и [`<img>`](/html/doka/img), чтобы определить, какое изображение должен загрузить браузер для текущих условий отображения.

## Как пишется

В теге `<source>` могут использоваться атрибуты:

### src

Требуется только для использования внутри тегов `<audio>` и `<video>`. В атрибуте указывается путь до медиафайла. Если тег `<source>` находится внутри [`<picture>`](/html/doka/picture), то атрибут `src` игнорируется.

```html
<audio controls>
  <source src="song.mp3" type="audio/mpeg">
  <source src="song.ogg" type="audio/ogg">
</audio>
```

### type

Содержит указание на MIME-тип медиафайла. Если у нас есть несколько одинаковых видеофайлов разного формата, то атрибут `type` помогает выбрать первый поддерживаемый браузером:

```html
<video controls width="250" height="200" muted>
  <source src="birthday.webm" type="video/webm">
  <source src="birthday.mp4" type="video/mp4">
</video>
```

Если браузер поддерживает формат WebM, то будет загружен файл из первого тега `<source>`. Если нет, то из второго. Обычно перечисляют несколько форматов видео или аудио, начиная с самого эффективного по соотношению «объём-качество».

### media

Может использоваться в `<source>` только внутри элемента [`<picture>`](/html/doka/picture). Атрибут содержит медиавыражение для выбора нужного изображения.

```html
<picture>
  <source srcset="big.jpg" media="(min-width: 600px)">
  <img src="small.jpg" alt="Абстрактное изображение">
</picture>
```

При ширине экрана >= 600 пикселей будет загружено изображение из тега `<source>`. В других случаях — из тега `<img>`.

### srcset

В этом атрибуте через запятую перечисляются строки, дающие браузеру информацию об изображениях. Каждая строка состоит из следующих частей:

- URL изображения (например,`1024x768.png`);
- целое число, за которым идёт буква `w` (например, `1024w`). Число указывает на ширину изображения в пикселях;
- число, за которым идёт буква `x` (например, `1.5x`). Число указывает на плотность пикселей, для которой будет использоваться изображение.

Например, атрибут может выглядеть так:

```html
<source srcset="640x480.png 1x, 1280x960.png 2x">
```

Эта запись означает, что для экранов с обычной плотностью пикселей будет использовано изображение `640x480.png`, а для экранов с удвоенной плотностью пикселей (например, для retina-экранов) — `1280x960.png`.

Другой вариант записи атрибута:

```html
<source srcset="1024x768.png 1024w, 640x480.png 640w">
```

Здесь мы говорим браузеру, что изображение `1024x768.png` имеет ширину 1024px, а изображение `640x480.png` — 640px. Эта информация помогает браузеру определить, какое изображение выбрать при разборе соседнего атрибута `sizes`.

### sizes

Атрибут говорит браузеру, какой ширины нам нужно будет изображение из текущего элемента `<source>` при отрисовке страницы. Говорят, что браузер определяет **ширину слота** для изображения. Можно считать, что мы заранее сообщаем браузеру, сколько места на странице «забронировать» под изображение. Значением атрибута может быть либо абсолютное значение (например, `150px` или `30em`), либо относительное (например, `20vw`).

Атрибуты `srcset` и `sizes` эффективно работают в паре. Рассмотрим пример:

```html
<source
  srcset="1024x768.png 1024w, 640x480.png 640w"
  sizes="(max-width: 1200px) 50vw, 1024px">
```

Когда браузер разбирает тег `<source>`, он выполняет следующие действия:

- смотрит на текущую ширину окна браузера;
- ищет подходящий вариант из атрибута `sizes`. Например, при ширине окна 1000 пикселей выполнится медиа-условие `(max-width:1200px)` и браузер установит ширину слота 50vw (500 пикселей). Если ширина окна будет больше, то ширина слота будет установлена в 1024 пикселя.
- после этого из атрибута `srcset` браузер выберет картинку, чья ширина совпадает с шириной слота, либо ближайшее изображение с большей шириной. Для ширины окна 1000 пикселей будет выбрано изображение `640x480.png`, так как его ширина ближе всего к ширине слота. Для ширины окна больше 1200 пикселей будет выбрано изображение `1024x768.png`.

<iframe title="Адаптивные изображения" src="demos/adaptive.html"></iframe>
